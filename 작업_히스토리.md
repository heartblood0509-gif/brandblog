# ë¸Œëœë“œ ë¸”ë¡œê·¸ ìë™ ìƒì„± ë„êµ¬ - ì‘ì—… íˆìŠ¤í† ë¦¬

## í”„ë¡œì íŠ¸ ê°œìš”

**ëª©í‘œ**: ë¸Œëœë“œ ë¸”ë¡œê·¸ ê¸€ì„ ë ˆí¼ëŸ°ìŠ¤ í˜•ì‹ì— ë§ì¶° ìë™ìœ¼ë¡œ ìƒì„±í•˜ëŠ” PyQt5 GUI ì• í”Œë¦¬ì¼€ì´ì…˜

**ìœ„ì¹˜**: `/Users/yunseojun/AI project/test1`

---

## ì‘ì—… ì§„í–‰ ìˆœì„œ

### 1ë‹¨ê³„: í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì •
- Python ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”
- ê¸°ë³¸ íŒ¨í‚¤ì§€ ì„¤ì¹˜: PyQt5, python-dotenv
- `.env` íŒŒì¼ ì„¤ì •

### 2ë‹¨ê³„: GUI ì• í”Œë¦¬ì¼€ì´ì…˜ ê¸°ë³¸ êµ¬ì¡° (PyQt5 + ë‹¤í¬ëª¨ë“œ)
**íŒŒì¼**: `blog_generator.py`

**í•µì‹¬ ê¸°ëŠ¥**:
- ë‹¤í¬ëª¨ë“œ ë””ìì¸
- ì¢Œìš° íŒ¨ë„ ë¶„í•  ë ˆì´ì•„ì›ƒ
  - ì™¼ìª½: ë ˆí¼ëŸ°ìŠ¤ ê¸€ ì…ë ¥/ë¶„ì„
  - ì˜¤ë¥¸ìª½: ìƒˆ ê¸€ ìƒì„±/í¸ì§‘
- íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸°/ì €ì¥ ê¸°ëŠ¥

### 3ë‹¨ê³„: AI API ì—°ë™ (Anthropic â†’ Gemini)

#### ì´ˆê¸° ì‹œë„: Anthropic Claude API
- Claude Sonnet 4.5 ëª¨ë¸ ì‚¬ìš© ê³„íš
- `anthropic` ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
- 400/401 API í‚¤ ì˜¤ë¥˜ ë°œìƒ

#### ìµœì¢… ì„ íƒ: Google Gemini API
**ë³€ê²½ ì´ìœ **:
1. Anthropic API deprecated íŒ¨í‚¤ì§€ ë¬¸ì œ
2. Gemini 2.0 Flash Exp ëª¨ë¸ í• ë‹¹ëŸ‰ ì´ˆê³¼ (429 ì—ëŸ¬)
3. ë¬´ë£Œ API í•„ìš”

**í•´ê²° ê³¼ì •**:
1. `google-generativeai` íŒ¨í‚¤ì§€ ì œê±° (deprecated)
2. ìµœì‹  `google-genai` íŒ¨í‚¤ì§€ ì„¤ì¹˜
3. ëª¨ë¸ ë³€ê²½: `gemini-2.0-flash-exp` â†’ `gemini-2.5-flash`
4. API ì½”ë“œ ë§ˆì´ê·¸ë ˆì´ì…˜
   - Import: `from google import genai`
   - Client: `genai.Client(api_key=api_key)`
   - API í˜¸ì¶œ: `client.models.generate_content(model='gemini-2.5-flash', contents=prompt)`

**API í‚¤ ì„¤ì •** (`.env`):
```env
GEMINI_API_KEY=your_gemini_api_key_here
```

### 4ë‹¨ê³„: ì›¹ í¬ë¡¤ë§ ê¸°ëŠ¥ ì¶”ê°€ (Playwright)

**ìš”êµ¬ì‚¬í•­**: URL ì…ë ¥ ì‹œ ë¸”ë¡œê·¸ ê¸€ ìë™ í¬ë¡¤ë§

**ì´ˆê¸° ì‹œë„**: `requests` + `BeautifulSoup`
- ë¬¸ì œ: JavaScript ë Œë”ë§ ì½˜í…ì¸ , iframe ì²˜ë¦¬ ë¶ˆê°€
- ë„¤ì´ë²„ ë¸”ë¡œê·¸ í¬ë¡¤ë§ ì‹¤íŒ¨

**ìµœì¢… í•´ê²°**: Playwright
- ì„¤ì¹˜: `pip install playwright`
- ë¸Œë¼ìš°ì € ì„¤ì¹˜: `playwright install chromium`
- í—¤ë“œë¦¬ìŠ¤ Chromiumìœ¼ë¡œ ì‹¤ì œ ë¸Œë¼ìš°ì € í™˜ê²½ êµ¬í˜„
- iframe ìë™ íƒì§€ ë° ì²˜ë¦¬
- JavaScript ë Œë”ë§ ì½˜í…ì¸  ì™„ë²½ ì¶”ì¶œ

**ì§€ì› í”Œë«í¼**:
- âœ… ë„¤ì´ë²„ ë¸”ë¡œê·¸ (iframe mainFrame ì²˜ë¦¬)
- âœ… í‹°ìŠ¤í† ë¦¬
- âœ… ì¼ë°˜ ë¸”ë¡œê·¸/ì›¹ì‚¬ì´íŠ¸

**êµ¬í˜„ í´ë˜ìŠ¤**: `CrawlThread` (ë°±ê·¸ë¼ìš´ë“œ ìŠ¤ë ˆë“œ)

### 5ë‹¨ê³„: Supabase ë°±ì—”ë“œ ì—°ë™

**ìš”êµ¬ì‚¬í•­**: ëª¨ë“  ë°ì´í„°ë¥¼ Supabaseì— ì €ì¥

**Supabase ì •ë³´**:
- URL: `https://your-project.supabase.co`
- API Key: `.env` íŒŒì¼ì— ì €ì¥ë¨

**ì‘ì—… ë‚´ìš©**:
1. `supabase` ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
2. `.env`ì— Supabase ì„¤ì • ì¶”ê°€
3. í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ ì„¤ê³„ (`supabase_schema.sql`)
4. ìë™ ì €ì¥ ê¸°ëŠ¥ êµ¬í˜„
   - ê¸€ ìƒì„± ì™„ë£Œ ì‹œ ìë™ìœ¼ë¡œ Supabaseì— ì €ì¥
   - ì €ì¥ ë°ì´í„°: ë ˆí¼ëŸ°ìŠ¤, ë¶„ì„ ê²°ê³¼, ì£¼ì œ, í‚¤ì›Œë“œ, ìƒì„±ëœ ê¸€
5. íˆìŠ¤í† ë¦¬ ë¡œë“œ ê¸°ëŠ¥ ì¶”ê°€

**ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”**: `blog_projects`
```sql
- id (UUID, PK)
- created_at, updated_at (timestamp)
- reference_url, reference_text
- analysis_result
- topic, keywords, requirements
- generated_content
- status (draft/analyzing/generating/completed)
- tags (ë°°ì—´)
```

---

## ìµœì¢… íŒŒì¼ êµ¬ì¡°

```
test1/
â”œâ”€â”€ blog_generator.py          # ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜
â”œâ”€â”€ supabase_schema.sql        # DB ìŠ¤í‚¤ë§ˆ
â”œâ”€â”€ requirements.txt           # íŒ¨í‚¤ì§€ ëª©ë¡
â”œâ”€â”€ .env                       # API í‚¤ (ë¹„ê³µê°œ)
â”œâ”€â”€ .env.example              # API í‚¤ í…œí”Œë¦¿
â”œâ”€â”€ README.md                 # í”„ë¡œì íŠ¸ ë¬¸ì„œ
â””â”€â”€ venv/                     # ê°€ìƒí™˜ê²½
```

---

## ì£¼ìš” ê¸°ìˆ  ìŠ¤íƒ

### ìµœì¢… ê¸°ìˆ  ìŠ¤íƒ
- **Python 3.14**
- **PyQt5** - GUI í”„ë ˆì„ì›Œí¬
- **Google Gemini API** - Gemini 2.5 Flash ëª¨ë¸
- **Playwright** - ì›¹ í¬ë¡¤ë§ (iframe, JS ì§€ì›)
- **Supabase** - ë°±ì—”ë“œ ë°ì´í„°ë² ì´ìŠ¤
- **python-dotenv** - í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬

### ì£¼ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬
```
google-genai==1.57.0
playwright==1.57.0
supabase==2.27.1
PyQt5==5.15.11
beautifulsoup4==4.14.3
requests==2.32.5
python-dotenv==1.2.1
```

---

## í•µì‹¬ ê¸°ëŠ¥

### 1. ë ˆí¼ëŸ°ìŠ¤ ê¸€ ì…ë ¥ (3ê°€ì§€ ë°©ë²•)
- âœ… **URL í¬ë¡¤ë§** (Playwright) - ì¶”ì²œ
- âœ… íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸° (.txt, .md)
- âœ… ì§ì ‘ ì…ë ¥/ë¶™ì—¬ë„£ê¸°

### 2. AI ë¶„ì„ (Gemini 2.5 Flash)
- ê¸€ì˜ êµ¬ì¡° ë¶„ì„ (ì œëª©, ì„œë¡ , ë³¸ë¡ , ê²°ë¡ )
- ë¬¸ì²´ íŠ¹ì§• ì¶”ì¶œ (ë¬¸ì¥ ê¸¸ì´, ì–´ì¡°, í‚¤ì›Œë“œ)
- ì†Œì œëª© ìŠ¤íƒ€ì¼ íŒ¨í„´ ë¶„ì„

### 3. ìƒˆ ê¸€ ìƒì„± (Gemini 2.5 Flash)
- ë ˆí¼ëŸ°ìŠ¤ì™€ ë™ì¼í•œ êµ¬ì¡°/ë¬¸ì²´ë¡œ ìƒì„±
- ì£¼ì œ ë° íƒ€ê²Ÿ í‚¤ì›Œë“œ ë°˜ì˜
- ì‹¤ì‹œê°„ í¸ì§‘ ê°€ëŠ¥

### 4. ì €ì¥ ê¸°ëŠ¥
- **ë¡œì»¬ ì €ì¥**: .txt, .md, .html (ë„¤ì´ë²„ ë¸”ë¡œê·¸ìš©)
- **Supabase ìë™ ì €ì¥**: ìƒì„± ì™„ë£Œ ì‹œ ìë™ DB ì €ì¥

### 5. ë°±ê·¸ë¼ìš´ë“œ ì²˜ë¦¬
- `CrawlThread`: URL í¬ë¡¤ë§
- `AnalyzeThread`: AI ë¶„ì„
- `GenerateThread`: AI ê¸€ ìƒì„±
- UI ë¸”ë¡ ì—†ì´ ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰

---

## í•´ê²°í•œ ì£¼ìš” ë¬¸ì œë“¤

### ë¬¸ì œ 1: Anthropic API 400 ì—ëŸ¬
**ì›ì¸**:
- Deprecated íŒ¨í‚¤ì§€ ì‚¬ìš©
- ì‹¤í—˜ ëª¨ë¸ í• ë‹¹ëŸ‰ ì´ˆê³¼

**í•´ê²°**:
- Google Gemini APIë¡œ ì „í™˜
- ìµœì‹  `google-genai` íŒ¨í‚¤ì§€ ì‚¬ìš©
- ì•ˆì •ì ì¸ `gemini-2.5-flash` ëª¨ë¸ ì‚¬ìš©

### ë¬¸ì œ 2: ë„¤ì´ë²„ ë¸”ë¡œê·¸ í¬ë¡¤ë§ ì‹¤íŒ¨
**ì›ì¸**:
- iframe ë‚´ë¶€ ì½˜í…ì¸ 
- JavaScript ë™ì  ë Œë”ë§

**í•´ê²°**:
- Playwrightë¡œ ì‹¤ì œ ë¸Œë¼ìš°ì € í™˜ê²½ êµ¬í˜„
- iframe mainFrame ìë™ íƒì§€
- `wait_until='networkidle'`ë¡œ ì™„ì „ ë¡œë“œ ëŒ€ê¸°

### ë¬¸ì œ 3: ë°ì´í„° ì˜ì†ì„±
**ìš”êµ¬ì‚¬í•­**:
- ìƒì„±ëœ ê¸€ ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥
- íˆìŠ¤í† ë¦¬ ê´€ë¦¬

**í•´ê²°**:
- Supabase ì—°ë™
- ìë™ ì €ì¥ ê¸°ëŠ¥ êµ¬í˜„
- Row Level Security ì„¤ì •

---

## ì‹¤í–‰ ë°©ë²•

### ì´ˆê¸° ì„¤ì • (ìµœì´ˆ 1íšŒ)
```bash
cd "/Users/yunseojun/AI project/test1"
source venv/bin/activate
pip install -r requirements.txt
playwright install chromium

# .env íŒŒì¼ ì„¤ì •
cp .env.example .env
# .env íŒŒì¼ì— API í‚¤ ì…ë ¥
```

### Supabase í…Œì´ë¸” ìƒì„±
Supabase ëŒ€ì‹œë³´ë“œì—ì„œ `supabase_schema.sql` ì‹¤í–‰

### í”„ë¡œê·¸ë¨ ì‹¤í–‰
```bash
cd "/Users/yunseojun/AI project/test1"
source venv/bin/activate
python blog_generator.py
```

---

## ì‚¬ìš© íë¦„

1. **URL ì…ë ¥** â†’ "ğŸŒ URL í¬ë¡¤ë§" í´ë¦­
2. **ë ˆí¼ëŸ°ìŠ¤ í™•ì¸** â†’ "ğŸ” êµ¬ì¡° ë¶„ì„" í´ë¦­
3. **ì£¼ì œ/í‚¤ì›Œë“œ ì…ë ¥** â†’ "ğŸ¨ ê¸€ ìƒì„±" í´ë¦­
4. **ìƒì„± ì™„ë£Œ** â†’ ìë™ìœ¼ë¡œ Supabase ì €ì¥
5. **í•„ìš”ì‹œ ìˆ˜ì •** â†’ "ğŸ’¾ ì €ì¥" í´ë¦­ (ë¡œì»¬ íŒŒì¼)

---

## API í‚¤ ì •ë³´

### Gemini API
- ë°œê¸‰: https://aistudio.google.com/app/apikey
- ë¬´ë£Œ í• ë‹¹ëŸ‰: ë¶„ë‹¹ 15 ìš”ì²­, ì¼ 1,500 ìš”ì²­
- í‚¤: `.env` íŒŒì¼ì— ì €ì¥ (ì ˆëŒ€ ê³µê°œ ì €ì¥ì†Œì— ì»¤ë°‹í•˜ì§€ ë§ ê²ƒ)

### Supabase
- URL: `.env` íŒŒì¼ì— ì €ì¥
- Key: `.env` íŒŒì¼ì— ì €ì¥

---

## í–¥í›„ ê°œì„  ê°€ëŠ¥ ì‚¬í•­

1. **íˆìŠ¤í† ë¦¬ UI ì¶”ê°€**
   - ì €ì¥ëœ í”„ë¡œì íŠ¸ ëª©ë¡ ë³´ê¸°
   - ì´ì „ í”„ë¡œì íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸°
   - ê²€ìƒ‰/í•„í„° ê¸°ëŠ¥

2. **ë°°ì¹˜ ìƒì„± ê¸°ëŠ¥**
   - ì—¬ëŸ¬ ì£¼ì œ ë™ì‹œ ìƒì„±
   - CSV ì…ë ¥ ì§€ì›

3. **í…œí”Œë¦¿ ê´€ë¦¬**
   - ìì£¼ ì‚¬ìš©í•˜ëŠ” ë ˆí¼ëŸ°ìŠ¤ ì €ì¥
   - í…œí”Œë¦¿ ë¼ì´ë¸ŒëŸ¬ë¦¬

4. **í†µê³„ ëŒ€ì‹œë³´ë“œ**
   - ìƒì„±ëœ ê¸€ í†µê³„
   - í‚¤ì›Œë“œ ë¶„ì„
   - ì‚¬ìš©ëŸ‰ ì¶”ì 

---

## ì£¼ìš” ì½”ë“œ ìœ„ì¹˜

### Gemini API í´ë¼ì´ì–¸íŠ¸
- **ìœ„ì¹˜**: `blog_generator.py` line 123-130
- **ì´ˆê¸°í™”**: `init_gemini_client()`

### Playwright í¬ë¡¤ë§
- **ìœ„ì¹˜**: `blog_generator.py` line 21-253
- **í´ë˜ìŠ¤**: `CrawlThread`
- **ë©”ì„œë“œ**: `extract_naver_blog_playwright()`, `extract_tistory_blog_playwright()`

### Supabase ì—°ë™
- **ìœ„ì¹˜**: `blog_generator.py` line 132-137, 584-624
- **ì´ˆê¸°í™”**: `init_supabase_client()`
- **ì €ì¥**: `save_to_supabase()`
- **ì¡°íšŒ**: `load_project_history()`

### AI ë¶„ì„/ìƒì„±
- **ë¶„ì„**: `AnalyzeThread` (line 256-291)
- **ìƒì„±**: `GenerateThread` (line 294-343)

---

## ë¬¸ì œ ë°œìƒ ì‹œ ì²´í¬ë¦¬ìŠ¤íŠ¸

### API ì—°ê²° ì‹¤íŒ¨
- [ ] `.env` íŒŒì¼ ì¡´ì¬ í™•ì¸
- [ ] `GEMINI_API_KEY` ê°’ í™•ì¸
- [ ] ì¸í„°ë„· ì—°ê²° í™•ì¸

### í¬ë¡¤ë§ ì‹¤íŒ¨
- [ ] Playwright ë¸Œë¼ìš°ì € ì„¤ì¹˜: `playwright install chromium`
- [ ] URL í˜•ì‹ í™•ì¸ (http:// ë˜ëŠ” https://)
- [ ] ì‚¬ì´íŠ¸ ì ‘ê·¼ ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸

### Supabase ì €ì¥ ì‹¤íŒ¨
- [ ] Supabase í…Œì´ë¸” ìƒì„± í™•ì¸
- [ ] `SUPABASE_URL`, `SUPABASE_KEY` í™•ì¸
- [ ] ì¸í„°ë„· ì—°ê²° í™•ì¸

---

## ì°¸ê³  ë¬¸ì„œ

- [Google Gemini API Docs](https://ai.google.dev/gemini-api/docs)
- [Playwright Python Docs](https://playwright.dev/python/docs/intro)
- [Supabase Python Client](https://supabase.com/docs/reference/python/introduction)
- [PyQt5 Documentation](https://www.riverbankcomputing.com/static/Docs/PyQt5/)

---

**ì‘ì„±ì¼**: 2026-01-08
**í”„ë¡œì íŠ¸ ê²½ë¡œ**: `/Users/yunseojun/AI project/test1`
**ìƒíƒœ**: âœ… ì™„ë£Œ ë° ì‘ë™ ì¤‘
